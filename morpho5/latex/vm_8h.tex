\hypertarget{vm_8h}{}\doxysection{vm/vm.h File Reference}
\label{vm_8h}\index{vm/vm.h@{vm/vm.h}}


The Morpho virtual machine.  


{\ttfamily \#include \char`\"{}core.\+h\char`\"{}}\newline
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{vm_8h_a3442cda78850731668a2412880c28721}\label{vm_8h_a3442cda78850731668a2412880c28721}} 
\#define {\bfseries M\+O\+R\+P\+H\+O\+\_\+\+C\+O\+RE}
\item 
\mbox{\Hypertarget{vm_8h_a6c9c37200a47b346d8f05e16990c5909}\label{vm_8h_a6c9c37200a47b346d8f05e16990c5909}} 
\#define {\bfseries M\+O\+R\+P\+H\+O\+\_\+\+P\+R\+O\+G\+R\+A\+M\+S\+T\+A\+RT}~0
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{vm_8h_a6e0448661c564765584850100a059167}{program\+\_\+setentry}} (program $\ast$p, \mbox{\hyperlink{core_8h_a107785ee96e2333686235ba7e0b869b6}{instructionindx}} entry)
\item 
\mbox{\hyperlink{core_8h_a107785ee96e2333686235ba7e0b869b6}{instructionindx}} \mbox{\hyperlink{vm_8h_a697b2aa1d5e4de37a67a9a0180773d20}{program\+\_\+getentry}} (program $\ast$p)
\item 
\mbox{\Hypertarget{vm_8h_a644b1a57e9e016b5092f76e9c877de6c}\label{vm_8h_a644b1a57e9e016b5092f76e9c877de6c}} 
varray\+\_\+value $\ast$ {\bfseries program\+\_\+getconstanttable} (program $\ast$p)
\item 
void \mbox{\hyperlink{vm_8h_a894f9f5a1ac6d741ce356c7b127f6374}{program\+\_\+bindobject}} (program $\ast$p, \mbox{\hyperlink{structsobject}{object}} $\ast$obj)
\begin{DoxyCompactList}\small\item\em Binds an object to a program. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structvalue}{value}} \mbox{\hyperlink{vm_8h_aa8f2233eacb18097bfaab61da0504e6a}{program\+\_\+internsymbol}} (program $\ast$p, \mbox{\hyperlink{structvalue}{value}} symbol)
\begin{DoxyCompactList}\small\item\em Interns a symbol into the programs symbol table. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{vm_8h_a09b596fa0d1e96ee79cc6b9394109f96}{vm\+\_\+disassembleinstruction}} (\mbox{\hyperlink{core_8h_a9ae6286de740e9f230d1a007e1b1cccd}{instruction}} bc, ptrdiff\+\_\+t pc, \mbox{\hyperlink{structvalue}{value}} $\ast$konst, \mbox{\hyperlink{structvalue}{value}} $\ast$reg)
\begin{DoxyCompactList}\small\item\em Disassembles a single instruction, writing the output to the console. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{vm_8h_a8c7c8d35ae65cb3dc42073b73f74edf9}\label{vm_8h_a8c7c8d35ae65cb3dc42073b73f74edf9}} 
void {\bfseries morpho\+\_\+bindobject} (vm $\ast$v, \mbox{\hyperlink{structvalue}{value}} obj)
\item 
void \mbox{\hyperlink{vm_8h_abc505c01f117f54f1abb728090fe06eb}{vm\+\_\+freeobjects}} (vm $\ast$v)
\item 
\mbox{\Hypertarget{vm_8h_afa92d1d0dbfaacab7ed03ca7d48cd66f}\label{vm_8h_afa92d1d0dbfaacab7ed03ca7d48cd66f}} 
void {\bfseries morpho\+\_\+collectgarbage} (void)
\item 
void \mbox{\hyperlink{vm_8h_a6ffb4b4424cecc24e3f5d052f24fa289}{morpho\+\_\+initialize}} (void)
\item 
void \mbox{\hyperlink{vm_8h_a607013ac2a41df103b0fccbeedf6cdf8}{morpho\+\_\+finalize}} (void)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
The Morpho virtual machine. 

\begin{DoxyAuthor}{Author}
T J Atherton 
\end{DoxyAuthor}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{vm_8h_a607013ac2a41df103b0fccbeedf6cdf8}\label{vm_8h_a607013ac2a41df103b0fccbeedf6cdf8}} 
\index{vm.h@{vm.h}!morpho\_finalize@{morpho\_finalize}}
\index{morpho\_finalize@{morpho\_finalize}!vm.h@{vm.h}}
\doxysubsubsection{\texorpdfstring{morpho\_finalize()}{morpho\_finalize()}}
{\footnotesize\ttfamily void morpho\+\_\+finalize (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}

Finalizes morpho \mbox{\Hypertarget{vm_8h_a6ffb4b4424cecc24e3f5d052f24fa289}\label{vm_8h_a6ffb4b4424cecc24e3f5d052f24fa289}} 
\index{vm.h@{vm.h}!morpho\_initialize@{morpho\_initialize}}
\index{morpho\_initialize@{morpho\_initialize}!vm.h@{vm.h}}
\doxysubsubsection{\texorpdfstring{morpho\_initialize()}{morpho\_initialize()}}
{\footnotesize\ttfamily void morpho\+\_\+initialize (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}

Initializes morpho \mbox{\Hypertarget{vm_8h_a894f9f5a1ac6d741ce356c7b127f6374}\label{vm_8h_a894f9f5a1ac6d741ce356c7b127f6374}} 
\index{vm.h@{vm.h}!program\_bindobject@{program\_bindobject}}
\index{program\_bindobject@{program\_bindobject}!vm.h@{vm.h}}
\doxysubsubsection{\texorpdfstring{program\_bindobject()}{program\_bindobject()}}
{\footnotesize\ttfamily void program\+\_\+bindobject (\begin{DoxyParamCaption}\item[{program $\ast$}]{p,  }\item[{\mbox{\hyperlink{structsobject}{object}} $\ast$}]{obj }\end{DoxyParamCaption})}



Binds an object to a program. 

Objects bound to the program are freed with the program; use for static data (e.\+g. held in constant tables) \mbox{\Hypertarget{vm_8h_a697b2aa1d5e4de37a67a9a0180773d20}\label{vm_8h_a697b2aa1d5e4de37a67a9a0180773d20}} 
\index{vm.h@{vm.h}!program\_getentry@{program\_getentry}}
\index{program\_getentry@{program\_getentry}!vm.h@{vm.h}}
\doxysubsubsection{\texorpdfstring{program\_getentry()}{program\_getentry()}}
{\footnotesize\ttfamily \mbox{\hyperlink{core_8h_a107785ee96e2333686235ba7e0b869b6}{instructionindx}} program\+\_\+getentry (\begin{DoxyParamCaption}\item[{program $\ast$}]{p }\end{DoxyParamCaption})}

Gets the entry point of a program ~\newline
 \mbox{\Hypertarget{vm_8h_aa8f2233eacb18097bfaab61da0504e6a}\label{vm_8h_aa8f2233eacb18097bfaab61da0504e6a}} 
\index{vm.h@{vm.h}!program\_internsymbol@{program\_internsymbol}}
\index{program\_internsymbol@{program\_internsymbol}!vm.h@{vm.h}}
\doxysubsubsection{\texorpdfstring{program\_internsymbol()}{program\_internsymbol()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structvalue}{value}} program\+\_\+internsymbol (\begin{DoxyParamCaption}\item[{program $\ast$}]{p,  }\item[{\mbox{\hyperlink{structvalue}{value}}}]{symbol }\end{DoxyParamCaption})}



Interns a symbol into the programs symbol table. 

Note that the string is cloned if it does not exist already. Interning is used to accelerate dynamic lookups as the same string for a symbol will be used universally \mbox{\Hypertarget{vm_8h_a6e0448661c564765584850100a059167}\label{vm_8h_a6e0448661c564765584850100a059167}} 
\index{vm.h@{vm.h}!program\_setentry@{program\_setentry}}
\index{program\_setentry@{program\_setentry}!vm.h@{vm.h}}
\doxysubsubsection{\texorpdfstring{program\_setentry()}{program\_setentry()}}
{\footnotesize\ttfamily void program\+\_\+setentry (\begin{DoxyParamCaption}\item[{program $\ast$}]{p,  }\item[{\mbox{\hyperlink{core_8h_a107785ee96e2333686235ba7e0b869b6}{instructionindx}}}]{entry }\end{DoxyParamCaption})}

Sets the entry point of a program \mbox{\Hypertarget{vm_8h_a09b596fa0d1e96ee79cc6b9394109f96}\label{vm_8h_a09b596fa0d1e96ee79cc6b9394109f96}} 
\index{vm.h@{vm.h}!vm\_disassembleinstruction@{vm\_disassembleinstruction}}
\index{vm\_disassembleinstruction@{vm\_disassembleinstruction}!vm.h@{vm.h}}
\doxysubsubsection{\texorpdfstring{vm\_disassembleinstruction()}{vm\_disassembleinstruction()}}
{\footnotesize\ttfamily void vm\+\_\+disassembleinstruction (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{core_8h_a9ae6286de740e9f230d1a007e1b1cccd}{instruction}}}]{instruction,  }\item[{ptrdiff\+\_\+t}]{indx,  }\item[{\mbox{\hyperlink{structvalue}{value}} $\ast$}]{konst,  }\item[{\mbox{\hyperlink{structvalue}{value}} $\ast$}]{reg }\end{DoxyParamCaption})}



Disassembles a single instruction, writing the output to the console. 


\begin{DoxyParams}{Parameters}
{\em instruction} & The instruction to disassemble \\
\hline
{\em indx} & Instruction index to display \\
\hline
{\em konst} & current constant table \\
\hline
{\em reg} & current registers \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{vm_8h_abc505c01f117f54f1abb728090fe06eb}\label{vm_8h_abc505c01f117f54f1abb728090fe06eb}} 
\index{vm.h@{vm.h}!vm\_freeobjects@{vm\_freeobjects}}
\index{vm\_freeobjects@{vm\_freeobjects}!vm.h@{vm.h}}
\doxysubsubsection{\texorpdfstring{vm\_freeobjects()}{vm\_freeobjects()}}
{\footnotesize\ttfamily void vm\+\_\+freeobjects (\begin{DoxyParamCaption}\item[{vm $\ast$}]{v }\end{DoxyParamCaption})}

Frees all objects bound to a virtual machine 