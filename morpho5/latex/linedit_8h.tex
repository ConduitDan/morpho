\hypertarget{linedit_8h}{}\doxysection{interface/linedit.h File Reference}
\label{linedit_8h}\index{interface/linedit.h@{interface/linedit.h}}


A simple line editor with history, prediction and syntax highlighting.  


{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include $<$stdbool.\+h$>$}\newline
{\ttfamily \#include $<$ctype.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$termios.\+h$>$}\newline
{\ttfamily \#include $<$unistd.\+h$>$}\newline
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structslinedit__string}{slinedit\+\_\+string}}
\item 
struct \mbox{\hyperlink{structlinedit__stringlist}{linedit\+\_\+stringlist}}
\item 
struct \mbox{\hyperlink{structlinedit__token}{linedit\+\_\+token}}
\item 
struct \mbox{\hyperlink{structlinedit__syntaxcolordata}{linedit\+\_\+syntaxcolordata}}
\item 
struct \mbox{\hyperlink{structlineditor}{lineditor}}
\end{DoxyCompactItemize}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{linedit_8h_aeeeec482910f781086cfc892f68dd733}\label{linedit_8h_aeeeec482910f781086cfc892f68dd733}} 
\#define {\bfseries L\+I\+N\+E\+D\+I\+T\+\_\+\+D\+E\+F\+A\+U\+L\+T\+P\+R\+O\+M\+PT}~\char`\"{}$>$\char`\"{}
\end{DoxyCompactItemize}
\doxysubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \mbox{\hyperlink{structslinedit__string}{slinedit\+\_\+string}} \mbox{\hyperlink{linedit_8h_aec4a42c4b0a308cf5efaa6b6bc8d4219}{linedit\+\_\+string}}
\item 
typedef bool($\ast$ \mbox{\hyperlink{linedit_8h_a812bc895ecfe5e460352923744ea58cb}{linedit\+\_\+tokenizer}}) (char $\ast$in, void $\ast$$\ast$ref, \mbox{\hyperlink{structlinedit__token}{linedit\+\_\+token}} $\ast$tok)
\begin{DoxyCompactList}\small\item\em Tokenizer callback. \end{DoxyCompactList}\item 
typedef bool($\ast$ \mbox{\hyperlink{linedit_8h_a4ea0eecb098eff09034b4628f6998a7b}{linedit\+\_\+completer}}) (char $\ast$in, \mbox{\hyperlink{structlinedit__stringlist}{linedit\+\_\+stringlist}} $\ast$completion)
\begin{DoxyCompactList}\small\item\em Autocompletion callback @params in -\/ a string @params completion -\/ autocompletion structure. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \mbox{\hyperlink{linedit_8h_aaef1cefcd4bbbb5de0283d0290f5df16}{linedit\+\_\+color}} \{ \newline
{\bfseries L\+I\+N\+E\+D\+I\+T\+\_\+\+B\+L\+A\+CK}, 
{\bfseries L\+I\+N\+E\+D\+I\+T\+\_\+\+R\+ED}, 
{\bfseries L\+I\+N\+E\+D\+I\+T\+\_\+\+G\+R\+E\+EN}, 
{\bfseries L\+I\+N\+E\+D\+I\+T\+\_\+\+Y\+E\+L\+L\+OW}, 
\newline
{\bfseries L\+I\+N\+E\+D\+I\+T\+\_\+\+B\+L\+UE}, 
{\bfseries L\+I\+N\+E\+D\+I\+T\+\_\+\+M\+A\+G\+E\+N\+TA}, 
{\bfseries L\+I\+N\+E\+D\+I\+T\+\_\+\+C\+Y\+AN}, 
{\bfseries L\+I\+N\+E\+D\+I\+T\+\_\+\+W\+H\+I\+TE}, 
\newline
{\bfseries L\+I\+N\+E\+D\+I\+T\+\_\+\+D\+E\+F\+A\+U\+L\+T\+C\+O\+L\+OR}
 \}
\item 
\mbox{\Hypertarget{linedit_8h_a4e0601016f8ad845d4ea6cb91779acb6}\label{linedit_8h_a4e0601016f8ad845d4ea6cb91779acb6}} 
enum {\bfseries linedit\+\_\+emphasis} \{ {\bfseries L\+I\+N\+E\+D\+I\+T\+\_\+\+B\+O\+LD}, 
{\bfseries L\+I\+N\+E\+D\+I\+T\+\_\+\+U\+N\+D\+E\+R\+L\+I\+NE}, 
{\bfseries L\+I\+N\+E\+D\+I\+T\+\_\+\+R\+E\+V\+E\+R\+SE}, 
{\bfseries L\+I\+N\+E\+D\+I\+T\+\_\+\+N\+O\+NE}
 \}
\item 
enum \mbox{\hyperlink{linedit_8h_aac488588c54ea74107b850095ba9ab80}{lineditormode}} \{ {\bfseries L\+I\+N\+E\+D\+I\+T\+\_\+\+D\+E\+F\+A\+U\+L\+T\+M\+O\+DE}, 
{\bfseries L\+I\+N\+E\+D\+I\+T\+\_\+\+S\+E\+L\+E\+C\+T\+I\+O\+N\+M\+O\+DE}, 
{\bfseries L\+I\+N\+E\+D\+I\+T\+\_\+\+H\+I\+S\+T\+O\+R\+Y\+M\+O\+DE}
 \}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
char $\ast$ \mbox{\hyperlink{linedit_8h_aefde71eb6eb304ebdfc5ac60ff8da158}{linedit}} (\mbox{\hyperlink{structlineditor}{lineditor}} $\ast$edit)
\item 
void \mbox{\hyperlink{linedit_8h_acf61dede3ce74bce104689eedda60a4d}{linedit\+\_\+syntaxcolor}} (\mbox{\hyperlink{structlineditor}{lineditor}} $\ast$edit, \mbox{\hyperlink{linedit_8h_a812bc895ecfe5e460352923744ea58cb}{linedit\+\_\+tokenizer}} tokenizer, \mbox{\hyperlink{linedit_8h_aaef1cefcd4bbbb5de0283d0290f5df16}{linedit\+\_\+color}} $\ast$cols, unsigned int ncols)
\begin{DoxyCompactList}\small\item\em Configures syntax coloring. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{linedit_8h_a65f32a0df2da0fd4a8719101bf802b70}{linedit\+\_\+autocomplete}} (\mbox{\hyperlink{structlineditor}{lineditor}} $\ast$edit, \mbox{\hyperlink{linedit_8h_a4ea0eecb098eff09034b4628f6998a7b}{linedit\+\_\+completer}} completer)
\begin{DoxyCompactList}\small\item\em Configures autocomplete. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{linedit_8h_ac36fe15cca44a17bd66d0adec50f5e1b}{linedit\+\_\+addsuggestion}} (\mbox{\hyperlink{structlinedit__stringlist}{linedit\+\_\+stringlist}} $\ast$completion, char $\ast$string)
\begin{DoxyCompactList}\small\item\em Adds a completion suggestion. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{linedit_8h_ae91ac09ffbe0f8919d31e575ddffdc5f}{linedit\+\_\+setprompt}} (\mbox{\hyperlink{structlineditor}{lineditor}} $\ast$edit, char $\ast$prompt)
\begin{DoxyCompactList}\small\item\em Sets the prompt. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{linedit_8h_ad257e9cb2c0024d93b353f142178129f}{linedit\+\_\+displaywithstyle}} (\mbox{\hyperlink{structlineditor}{lineditor}} $\ast$edit, char $\ast$string, \mbox{\hyperlink{linedit_8h_aaef1cefcd4bbbb5de0283d0290f5df16}{linedit\+\_\+color}} col, linedit\+\_\+emphasis emph)
\begin{DoxyCompactList}\small\item\em Displays a string with a given color and emphasis. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{linedit_8h_a82bbfae02785246934cede1839780581}{linedit\+\_\+displaywithsyntaxcoloring}} (\mbox{\hyperlink{structlineditor}{lineditor}} $\ast$edit, char $\ast$string)
\begin{DoxyCompactList}\small\item\em Displays a string with syntax coloring. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{linedit_8h_a36a8e2ba6fa87aedacb29b528a8487be}{linedit\+\_\+init}} (\mbox{\hyperlink{structlineditor}{lineditor}} $\ast$edit)
\item 
void \mbox{\hyperlink{linedit_8h_ae841de06bdb4a67a87432877d25c4ad3}{linedit\+\_\+clear}} (\mbox{\hyperlink{structlineditor}{lineditor}} $\ast$edit)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
A simple line editor with history, prediction and syntax highlighting. 

\begin{DoxyAuthor}{Author}
T J Atherton 
\end{DoxyAuthor}


\doxysubsection{Typedef Documentation}
\mbox{\Hypertarget{linedit_8h_a4ea0eecb098eff09034b4628f6998a7b}\label{linedit_8h_a4ea0eecb098eff09034b4628f6998a7b}} 
\index{linedit.h@{linedit.h}!linedit\_completer@{linedit\_completer}}
\index{linedit\_completer@{linedit\_completer}!linedit.h@{linedit.h}}
\doxysubsubsection{\texorpdfstring{linedit\_completer}{linedit\_completer}}
{\footnotesize\ttfamily typedef bool($\ast$ linedit\+\_\+completer) (char $\ast$in, \mbox{\hyperlink{structlinedit__stringlist}{linedit\+\_\+stringlist}} $\ast$completion)}



Autocompletion callback @params in -\/ a string @params completion -\/ autocompletion structure. 

This user function is called when linedit requests autocompletion of a string. The function should identify any possible suggestions and call linedit\+\_\+addcompletion to add them one by one.

Only {\itshape remaining} characters from the suggestion should be added, e.\+g. for \char`\"{}hello\char`\"{} if the user has typed \char`\"{}he\char`\"{} the function should add \char`\"{}llo\char`\"{} as a suggestion.

The function should return true if autocompletion was successfully processed or false otherwise. \mbox{\Hypertarget{linedit_8h_aec4a42c4b0a308cf5efaa6b6bc8d4219}\label{linedit_8h_aec4a42c4b0a308cf5efaa6b6bc8d4219}} 
\index{linedit.h@{linedit.h}!linedit\_string@{linedit\_string}}
\index{linedit\_string@{linedit\_string}!linedit.h@{linedit.h}}
\doxysubsubsection{\texorpdfstring{linedit\_string}{linedit\_string}}
{\footnotesize\ttfamily typedef struct \mbox{\hyperlink{structslinedit__string}{slinedit\+\_\+string}} \mbox{\hyperlink{linedit_8h_aec4a42c4b0a308cf5efaa6b6bc8d4219}{linedit\+\_\+string}}}

lineditor strings \mbox{\Hypertarget{linedit_8h_a812bc895ecfe5e460352923744ea58cb}\label{linedit_8h_a812bc895ecfe5e460352923744ea58cb}} 
\index{linedit.h@{linedit.h}!linedit\_tokenizer@{linedit\_tokenizer}}
\index{linedit\_tokenizer@{linedit\_tokenizer}!linedit.h@{linedit.h}}
\doxysubsubsection{\texorpdfstring{linedit\_tokenizer}{linedit\_tokenizer}}
{\footnotesize\ttfamily typedef bool($\ast$ linedit\+\_\+tokenizer) (char $\ast$in, void $\ast$$\ast$ref, \mbox{\hyperlink{structlinedit__token}{linedit\+\_\+token}} $\ast$tok)}



Tokenizer callback. 


\begin{DoxyParams}{Parameters}
{\em in} & -\/ a string \\
\hline
{\em ref} & -\/ System for storing persistent data between calls to the lexer. \\
\hline
{\em tok} & -\/ pointer to a token structure that the caller should fill out.  This user function is called when linedit needs to tokenize a string. The function should identify the next token in the string and fill out the following fields\+: tok-\/$>$type -\/ should contain the token type. This is used e.\+g. an index to the color array. tok-\/$>$start -\/ should point to the first significant character in the token tok-\/$>$length -\/ should contain the length of the token, in bytes The function should return true if a token was successfully processed or false otherwise.\\
\hline
\end{DoxyParams}
Storing persistent data over a sequance of calls to implement non-\/\+C\+FG\+: On the first call, $\ast$ref is N\+U\+LL. You should malloc your structure, initialize it, set $\ast$ref to point to it and return the first token. After that, $\ast$ref will point to your structure. Once linedit is done tokenizing, it will call free on your pointer. \begin{DoxyWarning}{Warning}
\+: You must not malloc child structures as these will not be freed. 
\end{DoxyWarning}


\doxysubsection{Enumeration Type Documentation}
\mbox{\Hypertarget{linedit_8h_aaef1cefcd4bbbb5de0283d0290f5df16}\label{linedit_8h_aaef1cefcd4bbbb5de0283d0290f5df16}} 
\index{linedit.h@{linedit.h}!linedit\_color@{linedit\_color}}
\index{linedit\_color@{linedit\_color}!linedit.h@{linedit.h}}
\doxysubsubsection{\texorpdfstring{linedit\_color}{linedit\_color}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{linedit_8h_aaef1cefcd4bbbb5de0283d0290f5df16}{linedit\+\_\+color}}}

Colors \mbox{\Hypertarget{linedit_8h_aac488588c54ea74107b850095ba9ab80}\label{linedit_8h_aac488588c54ea74107b850095ba9ab80}} 
\index{linedit.h@{linedit.h}!lineditormode@{lineditormode}}
\index{lineditormode@{lineditormode}!linedit.h@{linedit.h}}
\doxysubsubsection{\texorpdfstring{lineditormode}{lineditormode}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{linedit_8h_aac488588c54ea74107b850095ba9ab80}{lineditormode}}}

Keep track of what the line editor is doing 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{linedit_8h_aefde71eb6eb304ebdfc5ac60ff8da158}\label{linedit_8h_aefde71eb6eb304ebdfc5ac60ff8da158}} 
\index{linedit.h@{linedit.h}!linedit@{linedit}}
\index{linedit@{linedit}!linedit.h@{linedit.h}}
\doxysubsubsection{\texorpdfstring{linedit()}{linedit()}}
{\footnotesize\ttfamily char$\ast$ linedit (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structlineditor}{lineditor}} $\ast$}]{edit }\end{DoxyParamCaption})}

Public interface to the line editor. 
\begin{DoxyParams}{Parameters}
{\em edit} & -\/ a line editor that has been initialized with linedit\+\_\+init. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the string input by the user, or N\+U\+LL if nothing entered. 
\end{DoxyReturn}
Ensure we are not passed a N\+U\+LL pointer\mbox{\Hypertarget{linedit_8h_ac36fe15cca44a17bd66d0adec50f5e1b}\label{linedit_8h_ac36fe15cca44a17bd66d0adec50f5e1b}} 
\index{linedit.h@{linedit.h}!linedit\_addsuggestion@{linedit\_addsuggestion}}
\index{linedit\_addsuggestion@{linedit\_addsuggestion}!linedit.h@{linedit.h}}
\doxysubsubsection{\texorpdfstring{linedit\_addsuggestion()}{linedit\_addsuggestion()}}
{\footnotesize\ttfamily void linedit\+\_\+addsuggestion (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structlinedit__stringlist}{linedit\+\_\+stringlist}} $\ast$}]{completion,  }\item[{char $\ast$}]{string }\end{DoxyParamCaption})}



Adds a completion suggestion. 


\begin{DoxyParams}{Parameters}
{\em completion} & completion data structure \\
\hline
{\em string} & string to add \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{linedit_8h_a65f32a0df2da0fd4a8719101bf802b70}\label{linedit_8h_a65f32a0df2da0fd4a8719101bf802b70}} 
\index{linedit.h@{linedit.h}!linedit\_autocomplete@{linedit\_autocomplete}}
\index{linedit\_autocomplete@{linedit\_autocomplete}!linedit.h@{linedit.h}}
\doxysubsubsection{\texorpdfstring{linedit\_autocomplete()}{linedit\_autocomplete()}}
{\footnotesize\ttfamily void linedit\+\_\+autocomplete (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structlineditor}{lineditor}} $\ast$}]{edit,  }\item[{\mbox{\hyperlink{linedit_8h_a4ea0eecb098eff09034b4628f6998a7b}{linedit\+\_\+completer}}}]{completer }\end{DoxyParamCaption})}



Configures autocomplete. 


\begin{DoxyParams}{Parameters}
{\em edit} & Line editor to configure \\
\hline
{\em completer} & a function \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{linedit_8h_ae841de06bdb4a67a87432877d25c4ad3}\label{linedit_8h_ae841de06bdb4a67a87432877d25c4ad3}} 
\index{linedit.h@{linedit.h}!linedit\_clear@{linedit\_clear}}
\index{linedit\_clear@{linedit\_clear}!linedit.h@{linedit.h}}
\doxysubsubsection{\texorpdfstring{linedit\_clear()}{linedit\_clear()}}
{\footnotesize\ttfamily void linedit\+\_\+clear (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structlineditor}{lineditor}} $\ast$}]{edit }\end{DoxyParamCaption})}

Finalize a line editor \mbox{\Hypertarget{linedit_8h_ad257e9cb2c0024d93b353f142178129f}\label{linedit_8h_ad257e9cb2c0024d93b353f142178129f}} 
\index{linedit.h@{linedit.h}!linedit\_displaywithstyle@{linedit\_displaywithstyle}}
\index{linedit\_displaywithstyle@{linedit\_displaywithstyle}!linedit.h@{linedit.h}}
\doxysubsubsection{\texorpdfstring{linedit\_displaywithstyle()}{linedit\_displaywithstyle()}}
{\footnotesize\ttfamily void linedit\+\_\+displaywithstyle (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structlineditor}{lineditor}} $\ast$}]{edit,  }\item[{char $\ast$}]{string,  }\item[{\mbox{\hyperlink{linedit_8h_aaef1cefcd4bbbb5de0283d0290f5df16}{linedit\+\_\+color}}}]{col,  }\item[{linedit\+\_\+emphasis}]{emph }\end{DoxyParamCaption})}



Displays a string with a given color and emphasis. 


\begin{DoxyParams}{Parameters}
{\em edit} & Line editor in use \\
\hline
{\em string} & String to display \\
\hline
{\em col} & Color \\
\hline
{\em emph} & Emphasis\\
\hline
{\em edit} & Line editor in use \\
\hline
{\em string} & String to display \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{linedit_8h_a82bbfae02785246934cede1839780581}\label{linedit_8h_a82bbfae02785246934cede1839780581}} 
\index{linedit.h@{linedit.h}!linedit\_displaywithsyntaxcoloring@{linedit\_displaywithsyntaxcoloring}}
\index{linedit\_displaywithsyntaxcoloring@{linedit\_displaywithsyntaxcoloring}!linedit.h@{linedit.h}}
\doxysubsubsection{\texorpdfstring{linedit\_displaywithsyntaxcoloring()}{linedit\_displaywithsyntaxcoloring()}}
{\footnotesize\ttfamily void linedit\+\_\+displaywithsyntaxcoloring (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structlineditor}{lineditor}} $\ast$}]{edit,  }\item[{char $\ast$}]{string }\end{DoxyParamCaption})}



Displays a string with syntax coloring. 


\begin{DoxyParams}{Parameters}
{\em edit} & Line editor in use \\
\hline
{\em string} & String to display \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{linedit_8h_a36a8e2ba6fa87aedacb29b528a8487be}\label{linedit_8h_a36a8e2ba6fa87aedacb29b528a8487be}} 
\index{linedit.h@{linedit.h}!linedit\_init@{linedit\_init}}
\index{linedit\_init@{linedit\_init}!linedit.h@{linedit.h}}
\doxysubsubsection{\texorpdfstring{linedit\_init()}{linedit\_init()}}
{\footnotesize\ttfamily void linedit\+\_\+init (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structlineditor}{lineditor}} $\ast$}]{edit }\end{DoxyParamCaption})}

Initialize a line editor \mbox{\Hypertarget{linedit_8h_ae91ac09ffbe0f8919d31e575ddffdc5f}\label{linedit_8h_ae91ac09ffbe0f8919d31e575ddffdc5f}} 
\index{linedit.h@{linedit.h}!linedit\_setprompt@{linedit\_setprompt}}
\index{linedit\_setprompt@{linedit\_setprompt}!linedit.h@{linedit.h}}
\doxysubsubsection{\texorpdfstring{linedit\_setprompt()}{linedit\_setprompt()}}
{\footnotesize\ttfamily void linedit\+\_\+setprompt (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structlineditor}{lineditor}} $\ast$}]{edit,  }\item[{char $\ast$}]{prompt }\end{DoxyParamCaption})}



Sets the prompt. 


\begin{DoxyParams}{Parameters}
{\em edit} & Line editor to configure \\
\hline
{\em prompt} & prompt string to use \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{linedit_8h_acf61dede3ce74bce104689eedda60a4d}\label{linedit_8h_acf61dede3ce74bce104689eedda60a4d}} 
\index{linedit.h@{linedit.h}!linedit\_syntaxcolor@{linedit\_syntaxcolor}}
\index{linedit\_syntaxcolor@{linedit\_syntaxcolor}!linedit.h@{linedit.h}}
\doxysubsubsection{\texorpdfstring{linedit\_syntaxcolor()}{linedit\_syntaxcolor()}}
{\footnotesize\ttfamily void linedit\+\_\+syntaxcolor (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structlineditor}{lineditor}} $\ast$}]{edit,  }\item[{\mbox{\hyperlink{linedit_8h_a812bc895ecfe5e460352923744ea58cb}{linedit\+\_\+tokenizer}}}]{tokenizer,  }\item[{\mbox{\hyperlink{linedit_8h_aaef1cefcd4bbbb5de0283d0290f5df16}{linedit\+\_\+color}} $\ast$}]{cols,  }\item[{unsigned int}]{ncols }\end{DoxyParamCaption})}



Configures syntax coloring. 


\begin{DoxyParams}{Parameters}
{\em edit} & Line editor to configure \\
\hline
{\em tokenizer} & A function to be called that will find the next token from a string \\
\hline
{\em cols} & An array of colors, one entry for each token type \\
\hline
{\em ncols} & Number of entries in the color array \\
\hline
\end{DoxyParams}
